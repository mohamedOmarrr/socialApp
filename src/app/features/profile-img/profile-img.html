@if(user.showUploadForm()){
<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div
    class="picForm bg-[#66849c] rounded-2xl p-6 w-[90%] sm:w-[400px] text-center shadow-lg relative animate-fadeIn"
  >
    <i
      class="fas fa-times absolute top-3 right-3 text-gray-500 cursor-pointer hover:text-black transition"
      (click)="user.showUploadForm.set(false)"
    ></i>

    <h2 class="text-lg font-semibold text-white mb-4">
      Upload Profile Picture
    </h2>

    <div class="flex flex-col items-center gap-4">
      <label
        for="fileInput"
        class="cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition"
      >
        <i class="fas fa-upload"></i>
        Choose Picture
      </label>

      <input
        type="file"
        [formControl]="profilePicture"
        id="fileInput"
        accept="image/*"
        hidden
        (change)="onFileSelected($event)"
      />

      @if (selectedFileName) {
      <p class="text-sm text-gray-600">{{ selectedFileName }}</p>
      }

      <button
        class="mt-3 bg-teal-600 text-white px-5 py-2 rounded-lg hover:bg-teal-700 transition disabled:opacity-50"
        [disabled]="profilePicture.invalid"
        (click)="uploadProfilePicture()"
      >
        @if (spinner()) {
        <div class="flex items-center justify-center">
          <h1>Updatingâ€¦</h1>
          <p-progress-spinner
            strokeWidth="8"
            fill="transparent"
            animationDuration=".5s"
            [style]="{ width: '20px', height: '20px' }"
          />
        </div>
        } @else { Update }
      </button>
    </div>
  </div>
</div>
}

<img
  [src]="user.userImg() || './images/d-user.jpg'"
  alt="Profile"
  class="w-full h-full rounded-full object-cover shadow-lg"
/>

<div
  class="w-[40px] h-[40px] absolute top-0 right-[-5px] bg-white/40 rounded-full flex justify-center items-center backdrop-blur-sm"
>
  <i
    class="CameraBtn fas fa-camera text-[30px] text-[#66849c] cursor-pointer"
    (click)="user.showUploadForm.set(true); $event.stopPropagation()"
  ></i>
</div>
