<div
  class="m-auto flex flex-col items-center rounded-full animate-spin-slow relative"
>
  <div class="w-[250px] h-[250px] flex items-center justify-center">
    <img
      src="./images/logo-cut-removebg-preview.png"
      alt="Hootly Logo"
      class="w-full"
    />
  </div>
</div>

<section
  class="fixed inset-0 flex items-center justify-center w-screen h-screen p-4 overflow-hidden"
>
  <form
    [formGroup]="signForm"
    (ngSubmit)="submit()"
    class="w-full max-w-md p-6 shadow-md rounded-3xl space-y-4 bg-white/30 backdrop-blur-md border border-white/30"
  >
    <h1 class="text-white font-[Pacifico] text-[25px]">Register Now</h1>

    <!-- ===== Name ===== -->
    <p-floatlabel variant="on" class="block mb-4">
      <input
        pInputText
        id="name"
        type="text"
        formControlName="name"
        class="w-full border rounded px-3 py-2"
        autocomplete="off"
      />
      <label for="name">Name</label>
    </p-floatlabel>
    @if(signForm.get('name')?.touched && signForm.get('name')?.invalid){
    <p-message severity="error">Name is required (3-20 characters)</p-message>
    }

    <!-- ===== Email ===== -->
    <p-floatlabel variant="on" class="block mb-4">
      <input
        pInputText
        id="email"
        type="email"
        formControlName="email"
        class="w-full border rounded px-3 py-2"
        autocomplete="off"
      />
      <label for="email">Email</label>
    </p-floatlabel>
    @if(signForm.get('email')?.touched && signForm.get('email')?.invalid){
    <p-message severity="error">Enter a valid email</p-message>
    }

    <!-- ===== Date of Birth ===== -->

    <input
      pInputText
      id="dateOfBirth"
      type="date"
      formControlName="dateOfBirth"
      class="w-full border rounded px-3 py-2"
    />

    @if(signForm.get('dateOfBirth')?.touched &&
    signForm.get('dateOfBirth')?.invalid){
    <p-message severity="error">Date of birth is required</p-message>
    }

    <!-- ===== Gender ===== -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">Gender</label>
      <div class="flex items-center space-x-6">
        <label class="flex items-center space-x-1 cursor-pointer">
          <input type="radio" value="male" formControlName="gender" />
          <span class="text-teal-700 font-mono">Male</span>
        </label>
        <label class="flex items-center space-x-1 cursor-pointer">
          <input
            type="radio"
            value="female"
            formControlName="gender"
            class="text-[rgb(16,212,130)]"
          />
          <span class="text-teal-700 font-mono">Female</span>
        </label>
      </div>
      @if(signForm.get('gender')?.touched && signForm.get('gender')?.invalid){
      <p-message severity="error">Gender is required</p-message>
      }
    </div>

    <!-- ===== Password ===== -->
    <p-floatlabel variant="on" class="block mb-4 relative">
      <input
        pInputText
        id="password"
        [type]="type"
        formControlName="password"
        class="w-full border rounded px-3 py-2 pr-10"
        autocomplete="new-password"
      />
      <label for="password">Password</label>
      @if(type==='password'){
      <i
        class="fas fa-eye absolute top-1/2 right-3 -translate-y-1/2 cursor-pointer"
        (click)="type = 'text'"
        (mousedown)="$event.preventDefault()"
      ></i>
      } @else {
      <i
        class="fas fa-eye-slash absolute top-1/2 right-3 -translate-y-1/2 cursor-pointer"
        (click)="type = 'password'"
        (mousedown)="$event.preventDefault()"
      ></i>
      }
    </p-floatlabel>
    @if(signForm.get('password')?.touched && signForm.get('password')?.invalid){
    <p-message severity="error">
      Password must be at least 8 chars, include upper/lower/number/special
    </p-message>
    }

    <!-- ===== Re-Password ===== -->
    <p-floatlabel variant="on" class="block mb-4 relative">
      <input
        pInputText
        id="rePassword"
        [type]="type"
        formControlName="rePassword"
        class="w-full border rounded px-3 py-2 pr-10"
        autocomplete="new-password"
      />
      <label for="rePassword">Re-Password</label>
      @if(type==='password'){
      <i
        class="fas fa-eye absolute top-1/2 right-3 -translate-y-1/2 cursor-pointer"
        (click)="type = 'text'"
        (mousedown)="$event.preventDefault()"
      ></i>
      } @else {
      <i
        class="fas fa-eye-slash absolute top-1/2 right-3 -translate-y-1/2 cursor-pointer"
        (click)="type = 'password'"
        (mousedown)="$event.preventDefault()"
      ></i>
      }
    </p-floatlabel>
    @if(signForm.get('rePassword')?.touched && signForm.getError('mismatch')){
    <p-message severity="error">Passwords do not match</p-message>
    }

    <!-- ===== Submit ===== -->
    <button
      type="submit"
      [disabled]="loading()"
      class="w-full font-bold px-4 py-2 font-goudy text-[18px] rounded-lg text-white border-[2px] border-clay bg-teal-600 hover:bg-teal-800 active:scale-[101%] disabled:opacity-50"
    >
      @if(loading()) {
      <div class="flex items-center justify-center">
        <h1>Loading</h1>
        <p-progress-spinner
          strokeWidth="8"
          fill="transparent"
          animationDuration=".5s"
          [style]="{ width: '20px', height: '20px' }"
        />
      </div>
      } @else { Register }
    </button>

    <div class="text-right">
      <a
        routerLink="/logIn"
        class="text-sm font-bold text-gray-600 hover:underline cursor-pointer"
      >
        Already have an account?
      </a>
    </div>
  </form>
</section>
