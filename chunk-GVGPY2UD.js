import{a as Y}from"./chunk-3P6UHHCF.js";import{c as P,d as j}from"./chunk-PGGJSSDN.js";import{a as B,b as m,c as q,d as G,e as U,f as v,g as Z,h as $,j as z,k as H,l as W,n as J,u as ee,v as te,w as ie,x as re,y as ne}from"./chunk-EWWL3PE5.js";import{A as O,U as A,da as K,fa as Q,ga as X,s as I,z as L}from"./chunk-PWYUI4KS.js";import"./chunk-Q3UCUI45.js";import{$ as f,Db as S,Fb as w,Gb as F,Oa as l,Q as T,Sb as D,U as E,Ua as _,Ub as s,Zb as k,_ as g,_a as N,fb as M,ia as V,nb as p,ob as u,tb as C,ub as t,vb as r,wb as c}from"./chunk-JGGDHNN7.js";var R=class e{constructor(n){this.http=n}signUp(n){return this.http.post(`${L.apiUrl}users/signup`,n)}static \u0275fac=function(a){return new(a||e)(E(I))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})};var le=()=>({width:"20px",height:"20px"});function me(e,n){e&1&&(t(0,"p-message",9),s(1,"Name is required (3-20 characters)"),r())}function de(e,n){e&1&&(t(0,"p-message",9),s(1,"Enter a valid email"),r())}function pe(e,n){e&1&&(t(0,"p-message",9),s(1,"Date of birth is required"),r())}function ue(e,n){e&1&&(t(0,"p-message",9),s(1,"Gender is required"),r())}function ce(e,n){if(e&1){let a=S();t(0,"i",31),w("click",function(){g(a);let o=F();return f(o.type="text")})("mousedown",function(o){return g(a),f(o.preventDefault())}),r()}}function ge(e,n){if(e&1){let a=S();t(0,"i",32),w("click",function(){g(a);let o=F();return f(o.type="password")})("mousedown",function(o){return g(a),f(o.preventDefault())}),r()}}function fe(e,n){e&1&&(t(0,"p-message",9),s(1," Password must be at least 8 chars, include upper/lower/number/special "),r())}function _e(e,n){if(e&1){let a=S();t(0,"i",31),w("click",function(){g(a);let o=F();return f(o.type="text")})("mousedown",function(o){return g(a),f(o.preventDefault())}),r()}}function ve(e,n){if(e&1){let a=S();t(0,"i",32),w("click",function(){g(a);let o=F();return f(o.type="password")})("mousedown",function(o){return g(a),f(o.preventDefault())}),r()}}function we(e,n){e&1&&(t(0,"p-message",9),s(1,"Passwords do not match"),r())}function be(e,n){e&1&&(t(0,"div",28)(1,"h1"),s(2,"Loading"),r(),c(3,"p-progress-spinner",33),r()),e&2&&(l(3),D(k(2,le)))}function he(e,n){e&1&&s(0," Register ")}var oe=class e{constructor(n,a,i,o,b,h,x){this.register=n;this.router=a;this.messageService=i;this.fb=o;this.log=b;this.user=h;this.zone=x;this.subForm=this.fb.group({email:[null],password:[null]});let d=this.router.getCurrentNavigation()?.extras?.state;d&&(d.source==="cart"&&d.toast?this.messageService.add(d.toast):d.source==="guard"&&d.toast&&this.messageService.add(d.toast))}subForm;errorMessage="";type="password";loading=V(!1);signForm=new U({name:new v("",[m.required,m.minLength(3),m.maxLength(20)]),email:new v("",[m.required,m.pattern(/^[a-zA-Z0-9._%+-]+@(gmail|yahoo)\.com$/)]),password:new v("",[m.required,m.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),rePassword:new v("",[m.required,m.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),dateOfBirth:new v("",m.required),gender:new v("",m.required)},{validators:this.confirmPassword});confirmPassword(n){return n.get("password")?.value===n.get("rePassword")?.value?null:{mismatch:!0}}submit(){this.signForm.markAllAsTouched(),this.signForm.valid&&(this.loading.set(!0),this.register.signUp(this.signForm.value).subscribe({next:()=>{this.subForm=this.fb.group({email:this.signForm.get("email"),password:this.signForm.get("password")}),this.subForm.valid&&this.log.login(this.subForm.value).subscribe({next:()=>{},error:n=>{console.log(n)}}),this.router.navigate(["/home"]),this.loading.set(!1),this.messageService.add({severity:"success",summary:"Success Process",detail:"Register completed successfully, Start login"})},error:n=>{console.error("Login failed:",n),this.errorMessage=n.error.message,this.loading.set(!1),this.messageService.add({severity:"error",summary:"Register Failed",detail:this.errorMessage})}}))}static \u0275fac=function(a){return new(a||e)(_(R),_(P),_(A),_(W),_(O),_(Y),_(M))};static \u0275cmp=N({type:e,selectors:[["app-register"]],decls:52,vars:13,consts:[[1,"m-auto","flex","flex-col","items-start","justify-start","rounded-full","animate-spin-slow"],[1,"w-[150px]","h-[150px]","flex","items-center","justify-center"],["src","./images/logo-cut-removebg-preview.png","alt","Hootly Logo",1,"w-full"],[1,"fixed","inset-0","flex","items-center","justify-center","w-screen","h-screen","p-4","overflow-hidden"],[1,"w-full","max-w-md","p-6","shadow-md","rounded-3xl","space-y-4","bg-white/30","backdrop-blur-md","border","border-white/30",3,"ngSubmit","formGroup"],[1,"text-white","font-[Pacifico]","text-[25px]"],["variant","on",1,"block","mb-4"],["pInputText","","id","name","type","text","formControlName","name","autocomplete","off",1,"w-full","border","rounded","px-3","py-2"],["for","name"],["severity","error"],["pInputText","","id","email","type","email","formControlName","email","autocomplete","off",1,"w-full","border","rounded","px-3","py-2"],["for","email"],["pInputText","","id","dateOfBirth","type","date","formControlName","dateOfBirth",1,"w-full","border","rounded","px-3","py-2"],[1,"mb-4"],[1,"block","mb-1","font-semibold","text-gray-700"],[1,"flex","items-center","space-x-6"],[1,"flex","items-center","space-x-1","cursor-pointer"],["type","radio","value","male","formControlName","gender"],[1,"text-teal-700","font-mono"],["type","radio","value","female","formControlName","gender",1,"text-[rgb(16,212,130)]"],["variant","on",1,"block","mb-4","relative"],["pInputText","","id","password","formControlName","password","autocomplete","new-password",1,"w-full","border","rounded","px-3","py-2","pr-10",3,"type"],["for","password"],[1,"fas","fa-eye","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer"],[1,"fas","fa-eye-slash","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer"],["pInputText","","id","rePassword","formControlName","rePassword","autocomplete","new-password",1,"w-full","border","rounded","px-3","py-2","pr-10",3,"type"],["for","rePassword"],["type","submit",1,"w-full","font-bold","px-4","py-2","font-goudy","text-[18px]","rounded-lg","text-white","border-[2px]","border-clay","bg-teal-600","hover:bg-teal-800","active:scale-[101%]","disabled:opacity-50",3,"disabled"],[1,"flex","items-center","justify-center"],[1,"text-right"],["routerLink","/logIn",1,"text-sm","font-bold","text-gray-600","hover:underline","cursor-pointer"],[1,"fas","fa-eye","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer",3,"click","mousedown"],[1,"fas","fa-eye-slash","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer",3,"click","mousedown"],["strokeWidth","8","fill","transparent","animationDuration",".5s"]],template:function(a,i){if(a&1&&(t(0,"div",0)(1,"div",1),c(2,"img",2),r()(),t(3,"section",3)(4,"form",4),w("ngSubmit",function(){return i.submit()}),t(5,"h1",5),s(6,"Register Now"),r(),t(7,"p-floatlabel",6),c(8,"input",7),t(9,"label",8),s(10,"Name"),r()(),p(11,me,2,0,"p-message",9),t(12,"p-floatlabel",6),c(13,"input",10),t(14,"label",11),s(15,"Email"),r()(),p(16,de,2,0,"p-message",9),c(17,"input",12),p(18,pe,2,0,"p-message",9),t(19,"div",13)(20,"label",14),s(21,"Gender"),r(),t(22,"div",15)(23,"label",16),c(24,"input",17),t(25,"span",18),s(26,"Male"),r()(),t(27,"label",16),c(28,"input",19),t(29,"span",18),s(30,"Female"),r()()(),p(31,ue,2,0,"p-message",9),r(),t(32,"p-floatlabel",20),c(33,"input",21),t(34,"label",22),s(35,"Password"),r(),p(36,ce,1,0,"i",23)(37,ge,1,0,"i",24),r(),p(38,fe,2,0,"p-message",9),t(39,"p-floatlabel",20),c(40,"input",25),t(41,"label",26),s(42,"Re-Password"),r(),p(43,_e,1,0,"i",23)(44,ve,1,0,"i",24),r(),p(45,we,2,0,"p-message",9),t(46,"button",27),p(47,be,4,3,"div",28)(48,he,1,0),r(),t(49,"div",29)(50,"a",30),s(51," Already have an account? "),r()()()()),a&2){let o,b,h,x,y,d;l(4),C("formGroup",i.signForm),l(7),u((o=i.signForm.get("name"))!=null&&o.touched&&((o=i.signForm.get("name"))!=null&&o.invalid)?11:-1),l(5),u((b=i.signForm.get("email"))!=null&&b.touched&&((b=i.signForm.get("email"))!=null&&b.invalid)?16:-1),l(2),u((h=i.signForm.get("dateOfBirth"))!=null&&h.touched&&((h=i.signForm.get("dateOfBirth"))!=null&&h.invalid)?18:-1),l(13),u((x=i.signForm.get("gender"))!=null&&x.touched&&((x=i.signForm.get("gender"))!=null&&x.invalid)?31:-1),l(2),C("type",i.type),l(3),u(i.type==="password"?36:37),l(2),u((y=i.signForm.get("password"))!=null&&y.touched&&((y=i.signForm.get("password"))!=null&&y.invalid)?38:-1),l(2),C("type",i.type),l(3),u(i.type==="password"?43:44),l(2),u((d=i.signForm.get("rePassword"))!=null&&d.touched&&i.signForm.getError("mismatch")?45:-1),l(),C("disabled",i.loading()),l(),u(i.loading()?47:48)}},dependencies:[J,Z,B,$,q,G,z,H,ee,j,ne,re,X,Q,ie,te,K],encapsulation:2})};export{oe as Register};
