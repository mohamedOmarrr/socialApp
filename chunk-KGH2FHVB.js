import{m as o,s as m,z as f}from"./chunk-VRRHNQBJ.js";import{M as s,Q as a,U as n,da as p,ia as l,ta as c}from"./chunk-JGGDHNN7.js";var u=class r{constructor(i,t,g){this.http=i;this.document=t;this.platformId=g;o(this.platformId)&&this.isLoggedIn.set(!!this.getToken())}isLoggedIn=l(!1);login(i){return this.http.post(`${f.apiUrl}users/signin`,i).pipe(s(t=>{t&&o(this.platformId)&&(this.document.cookie=`access_token=${t.token};path=/;`,this.isLoggedIn.set(!0))}))}getToken(){if(!o(this.platformId))return null;let t=this.document.cookie.split(";").map(e=>e.trim()).filter(e=>e.length>0).find(e=>e.startsWith("access_token="));return t&&t.split("=")[1]||null}logOut(){o(this.platformId)&&(this.document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.isLoggedIn.set(!1))}static \u0275fac=function(t){return new(t||r)(n(m),n(p),n(c))};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{u as a};
