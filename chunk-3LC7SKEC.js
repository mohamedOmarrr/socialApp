import{c as D,d as I}from"./chunk-DP57C7MR.js";import{a as O,b as d,c as j,d as q,e as L,f as _,g as G,h as B,j as $,k as H,n as U,o as J,v as K,w as Q,x as X,y as Y,z as ee}from"./chunk-HSXVTTNV.js";import{S as A,ba as z,da as Z,ea as W,s as P}from"./chunk-JFNJHXSR.js";import"./chunk-Q3UCUI45.js";import{$ as f,Cb as x,Eb as w,Fb as b,Na as l,Q as F,Rb as k,Ta as S,Tb as s,U as T,Yb as N,Za as M,_ as g,ia as V,mb as p,nb as u,sb as v,tb as t,ub as n,vb as c}from"./chunk-CDDVTM4M.js";var R=class e{constructor(r){this.http=r}signUp(r){return this.http.post(`${J.apiUrl}users/signup`,r)}static \u0275fac=function(a){return new(a||e)(T(P))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};var ne=()=>({width:"20px",height:"20px"});function oe(e,r){e&1&&(t(0,"p-message",9),s(1,"Name is required (3-20 characters)"),n())}function ae(e,r){e&1&&(t(0,"p-message",9),s(1,"Enter a valid email"),n())}function se(e,r){e&1&&(t(0,"p-message",9),s(1,"Date of birth is required"),n())}function le(e,r){e&1&&(t(0,"p-message",9),s(1,"Gender is required"),n())}function me(e,r){if(e&1){let a=x();t(0,"i",31),w("click",function(){g(a);let o=b();return f(o.type="text")})("mousedown",function(o){return g(a),f(o.preventDefault())}),n()}}function de(e,r){if(e&1){let a=x();t(0,"i",32),w("click",function(){g(a);let o=b();return f(o.type="password")})("mousedown",function(o){return g(a),f(o.preventDefault())}),n()}}function pe(e,r){e&1&&(t(0,"p-message",9),s(1," Password must be at least 8 chars, include upper/lower/number/special "),n())}function ue(e,r){if(e&1){let a=x();t(0,"i",31),w("click",function(){g(a);let o=b();return f(o.type="text")})("mousedown",function(o){return g(a),f(o.preventDefault())}),n()}}function ce(e,r){if(e&1){let a=x();t(0,"i",32),w("click",function(){g(a);let o=b();return f(o.type="password")})("mousedown",function(o){return g(a),f(o.preventDefault())}),n()}}function ge(e,r){e&1&&(t(0,"p-message",9),s(1,"Passwords do not match"),n())}function fe(e,r){e&1&&(t(0,"div",28)(1,"h1"),s(2,"Loading"),n(),c(3,"p-progress-spinner",33),n()),e&2&&(l(3),k(N(2,ne)))}function _e(e,r){e&1&&s(0," Register ")}var te=class e{constructor(r,a,i){this.redister=r;this.router=a;this.messageService=i;let m=this.router.getCurrentNavigation()?.extras?.state;m&&(m.source==="cart"&&m.toast?this.messageService.add(m.toast):m.source==="guard"&&m.toast&&this.messageService.add(m.toast))}errorMessage="";type="password";loading=V(!1);signForm=new L({name:new _("",[d.required,d.minLength(3),d.maxLength(20)]),email:new _("",[d.required,d.pattern(/^[a-zA-Z0-9._%+-]+@(gmail|yahoo)\.com$/)]),password:new _("",[d.required,d.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),rePassword:new _("",[d.required,d.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),dateOfBirth:new _("",d.required),gender:new _("",d.required)},{validators:this.confirmPassword});confirmPassword(r){return r.get("password")?.value===r.get("rePassword")?.value?null:{mismatch:!0}}submit(){this.signForm.markAllAsTouched(),this.signForm.valid&&(this.loading.set(!0),this.redister.signUp(this.signForm.value).subscribe({next:r=>{console.log("User registered successfully:",r),r.message==="success"&&(this.errorMessage="",this.router.navigate(["/log"]),this.loading.set(!1),this.messageService.add({severity:"success",summary:"Success Process",detail:"Register completed successfully, Start login"}))},error:r=>{console.error("Login failed:",r),this.errorMessage=r.error.message,this.loading.set(!1),this.messageService.add({severity:"error",summary:"Register Failed",detail:this.errorMessage})}}))}static \u0275fac=function(a){return new(a||e)(S(R),S(D),S(A))};static \u0275cmp=M({type:e,selectors:[["app-register"]],decls:52,vars:13,consts:[[1,"m-auto","flex","mt-3","flex-col","items-center","rounded-full","animate-spin-slow","relative"],[1,"w-[250px]","h-[250px]","flex","items-center","justify-center"],["src","./images/logo-cut-removebg-preview.png","alt","Hootly Logo",1,"w-full"],[1,"fixed","bottom-[-20px]","md:bottom-[50%]","left-0","md:left-[50%]","md:translate-x-[-50%]","md:translate-y-[50%]","w-full","flex","justify-center","max-w-full"],[1,"w-full","max-w-md","p-6","shadow-md","rounded-t-3xl","space-y-4","my-5","bg-white/30","backdrop-blur-md","border","border-white/30",3,"ngSubmit","formGroup"],[1,"text-white","font-[Pacifico]","text-[25px]"],["variant","on",1,"block","mb-4"],["pInputText","","id","name","type","text","formControlName","name","autocomplete","off",1,"w-full","border","rounded","px-3","py-2"],["for","name"],["severity","error"],["pInputText","","id","email","type","email","formControlName","email","autocomplete","off",1,"w-full","border","rounded","px-3","py-2"],["for","email"],["pInputText","","id","dateOfBirth","type","date","formControlName","dateOfBirth",1,"w-full","border","rounded","px-3","py-2"],[1,"mb-4"],[1,"block","mb-1","font-semibold","text-gray-700"],[1,"flex","items-center","space-x-6"],[1,"flex","items-center","space-x-1","cursor-pointer"],["type","radio","value","male","formControlName","gender"],[1,"text-teal-700","font-mono"],["type","radio","value","female","formControlName","gender",1,"text-[rgb(16,212,130)]"],["variant","on",1,"block","mb-4","relative"],["pInputText","","id","password","formControlName","password","autocomplete","new-password",1,"w-full","border","rounded","px-3","py-2","pr-10",3,"type"],["for","password"],[1,"fas","fa-eye","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer"],[1,"fas","fa-eye-slash","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer"],["pInputText","","id","rePassword","formControlName","rePassword","autocomplete","new-password",1,"w-full","border","rounded","px-3","py-2","pr-10",3,"type"],["for","rePassword"],["type","submit",1,"w-full","font-bold","px-4","py-2","font-goudy","text-[18px]","rounded-lg","text-white","border-[2px]","border-clay","bg-teal-600","hover:bg-teal-800","active:scale-[101%]","disabled:opacity-50",3,"disabled"],[1,"flex","items-center","justify-center"],[1,"text-right"],["routerLink","/logIn",1,"text-sm","font-bold","text-gray-600","hover:underline","cursor-pointer"],[1,"fas","fa-eye","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer",3,"click","mousedown"],[1,"fas","fa-eye-slash","absolute","top-1/2","right-3","-translate-y-1/2","cursor-pointer",3,"click","mousedown"],["strokeWidth","8","fill","transparent","animationDuration",".5s"]],template:function(a,i){if(a&1&&(t(0,"div",0)(1,"div",1),c(2,"img",2),n()(),t(3,"section",3)(4,"form",4),w("ngSubmit",function(){return i.submit()}),t(5,"h1",5),s(6,"Register Now"),n(),t(7,"p-floatlabel",6),c(8,"input",7),t(9,"label",8),s(10,"Name"),n()(),p(11,oe,2,0,"p-message",9),t(12,"p-floatlabel",6),c(13,"input",10),t(14,"label",11),s(15,"Email"),n()(),p(16,ae,2,0,"p-message",9),c(17,"input",12),p(18,se,2,0,"p-message",9),t(19,"div",13)(20,"label",14),s(21,"Gender"),n(),t(22,"div",15)(23,"label",16),c(24,"input",17),t(25,"span",18),s(26,"Male"),n()(),t(27,"label",16),c(28,"input",19),t(29,"span",18),s(30,"Female"),n()()(),p(31,le,2,0,"p-message",9),n(),t(32,"p-floatlabel",20),c(33,"input",21),t(34,"label",22),s(35,"Password"),n(),p(36,me,1,0,"i",23)(37,de,1,0,"i",24),n(),p(38,pe,2,0,"p-message",9),t(39,"p-floatlabel",20),c(40,"input",25),t(41,"label",26),s(42,"Re-Password"),n(),p(43,ue,1,0,"i",23)(44,ce,1,0,"i",24),n(),p(45,ge,2,0,"p-message",9),t(46,"button",27),p(47,fe,4,3,"div",28)(48,_e,1,0),n(),t(49,"div",29)(50,"a",30),s(51," Already have an account? "),n()()()()),a&2){let o,m,y,h,C,E;l(4),v("formGroup",i.signForm),l(7),u((o=i.signForm.get("name"))!=null&&o.touched&&((o=i.signForm.get("name"))!=null&&o.invalid)?11:-1),l(5),u((m=i.signForm.get("email"))!=null&&m.touched&&((m=i.signForm.get("email"))!=null&&m.invalid)?16:-1),l(2),u((y=i.signForm.get("dateOfBirth"))!=null&&y.touched&&((y=i.signForm.get("dateOfBirth"))!=null&&y.invalid)?18:-1),l(13),u((h=i.signForm.get("gender"))!=null&&h.touched&&((h=i.signForm.get("gender"))!=null&&h.invalid)?31:-1),l(2),v("type",i.type),l(3),u(i.type==="password"?36:37),l(2),u((C=i.signForm.get("password"))!=null&&C.touched&&((C=i.signForm.get("password"))!=null&&C.invalid)?38:-1),l(2),v("type",i.type),l(3),u(i.type==="password"?43:44),l(2),u((E=i.signForm.get("rePassword"))!=null&&E.touched&&i.signForm.getError("mismatch")?45:-1),l(),v("disabled",i.loading()),l(),u(i.loading()?47:48)}},dependencies:[U,G,O,B,j,q,$,H,K,I,ee,Y,W,Z,X,Q,z],encapsulation:2})};export{te as Register};
