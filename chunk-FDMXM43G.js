import{a as d}from"./chunk-KGH2FHVB.js";import{q as i,s as c,z as a}from"./chunk-VRRHNQBJ.js";import{Q as p,U as n,a as g,b as h,ia as s,s as m}from"./chunk-JGGDHNN7.js";var f=class r{constructor(t,e){this.http=t;this.log=e}userImg=s("");showUploadForm=s(!1);createForm=s(!1);uploadPersonalPhoto(t){let e=this.log.getToken(),o=new i(e?{token:e}:{});return this.http.put("https://linked-posts.routemisr.com/users/upload-photo",t,{headers:o})}getUserInfo(){let t=this.log.getToken(),e=new i(t?{token:t}:{});return this.http.get("https://linked-posts.routemisr.com/users/profile-data",{headers:e}).pipe(m(o=>({id:o.user._id,username:o.user.name,mail:o.user.email,date:o.user.dateOfBirth,gender:o.user.gender,image:o.user.photo,startIn:o.user.createdAt})))}getPersonalPosts(t){let e=this.log.getToken(),o=new i(e?{token:e}:{});return this.http.get(`${a.apiUrl}users/${t}/posts`,{headers:o}).pipe(m(l=>h(g({},l),{posts:[...l.posts??[]].reverse()})))}static \u0275fac=function(e){return new(e||r)(n(c),n(d))};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})};var u=class r{constructor(t,e){this.http=t;this.log=e}postID=s("");showComments=s(!1);header(){let t=this.log.getToken();return new i(t?{token:t}:{})}createComment(t){let e=this.header();return this.http.post(`${a.apiUrl}comments`,t,{headers:e})}getComments(t){let e=this.header();return this.http.get(`${a.apiUrl}posts/${t}/comments`,{headers:e}).pipe(m(o=>o.comments))}deleteComment(t){let e=this.header();return this.http.delete(`${a.apiUrl}comments/${t}`,{headers:e})}static \u0275fac=function(e){return new(e||r)(n(c),n(d))};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})};export{f as a,u as b};
